# デザイン・UI設計の決定事項

## 📅 2025-01-08 セッション

---

## ✅ 確定した仕様

### 1. デザイン方向性

```yaml
カラー:
  - パステルカラー（ピンク、ブルー、イエロー、ラベンダー、ミント、ピーチ）
  - 透明感（Glassmorphism / すりガラス効果）
  - 落ち着く雰囲気
  - 古臭くない、おしゃれすぎず
  - ふわふわ感

雰囲気:
  - 使いたくなる
  - 重くない
  - 報告したくなる
  - 作業者が好きそうな雰囲気
```

### 2. 言葉の自動変換

```yaml
方式: AI強制置き換え
使用API: OpenAI GPT-4o-mini
フロー:
  1. ユーザーがテキスト入力
  2. [記録する]ボタンタップ
  3. AI変換処理（1-2秒）
  4. 変換確認画面表示
     - 「優しく変換されました✨」
     - 変更前: "クソ難しかった"
     - 変更後: "とても難しかった"
     - [投稿する] [キャンセル]
  5. [投稿する]で確定（修正不可）

特徴:
  - マシュマロ方式（ユーザーは修正できない）
  - 強い言葉を自動で優しく変換
  - 優しい空間を強制的に維持
```

### 3. 画面構成

```yaml
タブ構成: 下部3タブ
  - [✏️ 記録] - 投稿画面
  - [🌍 みんな] - 他の人の記録を見る
  - [📅 私] - マイページ

デフォルト画面: 投稿タブ（すぐ投稿できる）
```

### 4. みんなタブのレイアウト

**採用: Instagram Story風（モダン・見やすい）**

```
┌─────────────────────────┐
│ [写真フル OR パステル]  │
│ ┌─────────────────────┐ │ ← 半透明黒背景
│ │ 🦊 がんばる人 2h前  │ │   白文字
│ └─────────────────────┘ │
│                         │
│                         │
│    [写真 or 余白]       │
│                         │
│                         │
│ ┌─────────────────────┐ │ ← すりガラス白カード
│ │React学習2時間。     │ │
│ │とても難しかった...  │ │
│ │💻            ❤️ 5  │ │ ← いいね右下
│ └─────────────────────┘ │
│                         │
├─────────────────────────┤
│ [✏️][🌍][📅]           │
└─────────────────────────┘
```

**特徴:**
- 1画面1投稿
- 縦スワイプで次へ
- プロフィール上部（半透明背景）
- テキスト・いいね下部（すりガラスカード）
- 写真ありはフルスクリーン背景
- 写真なしはパステルグラデーション背景

### 5. アニメーション

```yaml
コンセプト: 「くるんっぽんっ」系

具体例:
  - タブ切り替え: くるんっ（軽く回転しながらフェード）
  - いいねボタン: ぽんっ（スケールアニメーション）
  - 投稿完了: ぽんっ（✨が広がる）
  - ローディング: ぐるぐる→ぽちゃん（雲が吸い込まれる）

速度:
  - ゆっくり、柔らかく（300-500ms）
  - easing: cubic-bezier（バウンス感、elastic）
```

### 6. いいねアイコン

```yaml
アイコン: ❤️（ハート）
  - とりあえずハートで確定
  - あとで変更可能（☁️雲なども検討）

状態:
  - 未いいね: 薄いピンク
  - いいね済: 濃いピンク
  - タップ時: ぽんっとアニメーション
```

---

## 📬 翌日通知システム

### 仕様

```yaml
表示方法: 組み合わせ案
  1. プッシュ通知（朝9時、ON/OFF可能）
  2. アプリ起動時バナー（3秒表示）
  3. マイページに蓄積

メッセージ: パターンA（具体的な数字）
  「☁️ 昨日の記録
   12人が見てくれたよ
   3人が応援してくれたよ」

0人の場合:
  - 通知なし
  - アルゴリズムで0人を防ぐので基本発生しない
```

---

## 🎯 スマートマッチングアルゴリズム

### 投稿配信ロジック

```yaml
目的:
  - すべての投稿が最低10回は見られる
  - 新規投稿が埋もれない
  - 深夜投稿も朝に優先表示
  - カテゴリマッチングで関連性

スコアリング要素:
  1. 新規投稿ボーナス
     - 6時間以内: +60点
     - 12時間以内: +30点

  2. 表示回数ペナルティ
     - 5回未満: +50点
     - 10回未満: +30点
     - 20回未満: +10点

  3. カテゴリマッチ（必須）
     - 一致: +40点

  4. 時間帯マッチ
     - 深夜投稿を朝に表示: +25点

  5. いいね数
     - 軽く加点（最大+10点）

  6. ランダム要素
     - 0-30点（完全スコア順にならない）

表示ロジック:
  - 70%の確率でスコア順
  - 30%の確率でランダム
  - 偏りを防ぐ

最低保証:
  - 各投稿、24時間以内に最低10回表示
  - 深夜投稿も朝のユーザーに優先表示
```

---

## 🔄 既読管理

```yaml
ルール:
  - 過去24時間に見た投稿は再表示しない
  - 24時間経過後は再表示OK
  - 人気投稿（いいね5以上）は48時間ルール

目的:
  - 同じ投稿を連続で見ない
  - でも時間経てば新鮮に見える
  - 古い良い投稿も再発見できる
```

---

## 📊 データ構造（概要）

```yaml
workLogs コレクション:
  - logId
  - userId
  - text（変換後）
  - photoUrl
  - category（必須）
  - likes
  - viewCount（表示回数）
  - createdAt
  - isPublic

views コレクション:
  - viewId
  - logId
  - viewerId
  - viewedAt

dailyStats コレクション:
  - statId
  - logId
  - userId
  - date
  - viewCount
  - likeCount
```

---

## 🎨 検討したレイアウト案

### みんなタブのバリエーション

#### 案1: カード中央・コンパクト
- ふわふわ感: ⭐⭐⭐⭐⭐
- 見やすさ: ⭐⭐⭐⭐
- 独自性: ⭐⭐⭐

#### 案2: 写真メイン
- ふわふわ感: ⭐⭐
- 見やすさ: ⭐⭐⭐⭐⭐
- 独自性: ⭐⭐

#### 案3: 上下分割・情報整理
- ふわふわ感: ⭐⭐⭐⭐
- 見やすさ: ⭐⭐⭐⭐⭐
- 独自性: ⭐⭐⭐

#### 案4: 左右分割・コンパクト
- ふわふわ感: ⭐⭐
- 見やすさ: ⭐⭐⭐
- 独自性: ⭐⭐⭐⭐

#### 案5: Instagram Story風 ✅ **採用**
- ふわふわ感: ⭐⭐⭐
- 見やすさ: ⭐⭐⭐⭐⭐
- 独自性: ⭐⭐
- **モダン、バランス良い**

#### 案6: BeReal風
- ふわふわ感: ⭐⭐⭐⭐⭐
- 見やすさ: ⭐⭐⭐⭐⭐
- 独自性: ⭐⭐⭐

#### 案7: 吹き出し風
- ふわふわ感: ⭐⭐⭐⭐
- 見やすさ: ⭐⭐⭐
- 独自性: ⭐⭐⭐⭐⭐

---

## 💡 ゆるふわ要素の追加案（検討中）

将来的に検討する要素:

```yaml
1. 手書き風要素
   - 波線カード（～～～）
   - ノート感、日記感

2. スケッチ風装飾
   - ✎ 鉛筆アイコン
   - ☆ 星や落書き
   - ✓ チェックマーク

3. 付箋・メモ風
   - ポストイット感
   - 机の上感

4. ノート風罫線
   - 勉強ノート感
   - 学習記録感

5. ゆるい角丸 + 斜め配置
   - ゆるさ、脱力感
   - 個性

6. デスク風レイアウト
   - 作業環境感
   - ☕️ 📝 🖊️ 小物配置

結論:
  - Phase 1はモダンなStory風で進める
  - Phase 2以降でゆるふわ要素を追加検討
```

---

## 🚧 未決定・次回詰める項目

```yaml
画面設計:
  - 投稿タブのレイアウト詳細
  - マイページのレイアウト詳細
  - 変換確認モーダルのデザイン
  - ログイン画面・プロフィール設定画面

機能詳細:
  - 写真の扱い（必須/任意、アスペクト比）
  - カテゴリ選択（必須/任意）
  - プロフィール編集の動線
  - 設定画面の内容
  - エラーハンドリング

データ・ロジック:
  - 連続記録日数の計算ルール
  - 統計の集計方法
  - 通知の詳細設定
```

---

## 📝 メモ

- パステル × 透明感 × 落ち着き = 理想のゆるふわ
- Story風はモダンで見やすいが、ゆるふわ感との融合が課題
- 作業者が好きそうな雰囲気をどう出すか（将来の検討事項）
- ライブラリは全部使う（すりガラス効果など）
